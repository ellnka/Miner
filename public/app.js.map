{"version":3,"sources":["webpack:///webpack/bootstrap 317b3c5f6fae8b08bf0a","webpack:///./frontend/app.js","webpack:///./frontend/menu/index.js","webpack:///./frontend/menu/menu.jade","webpack:///./~/jade/lib/runtime.js","webpack:///fs (ignored)","webpack:///./frontend/menu/menu.styl","webpack:///./frontend/game/index.js","webpack:///./frontend/game/game.jade","webpack:///./frontend/game/game.styl"],"names":["menu","title","items","href","document","body","appendChild","getElem","addEventListener","event","alert","detail","value","game","height","width","bombCount","console","log","Menu","_title","_items","_render","_titleElem","_elem","querySelector","onclick","toggle","link","target","closest","contains","preventDefault","dispatchEvent","CustomEvent","bubble","innerHTML","tmp","createElement","firstElementChild","classList","Game","_status","_height","_width","_square","_bombCount","_cellQueue","openedBombCount","_initSquare","_initBombs","_gameFieldElem","cellOnClick","bind","bombOnRightClick","_settingsDialog","settingsOnClick","_menuElem","menuOnClick","min","max","rand","Math","random","floor","queue","row","column","result","i","length","j","mines","r","c","_getRandomInt","_updateCountersAroundBomb","_mines","cell","minerTitleElem","remove","add","tr","tc","_isCellBomb","startRow","startColumn","cellQueue","visitedQueue","_isCellVisited","cellCoords","shift","_openNextToBombCell","_isCellNextToBomb","_isCellInQueue","toString","aroundBombCount","spanTag","minerCounterElem","style","display","lastChild","bombCounter","_showError","constructor","message","e","_isGameCompleted","id","undefined","replace","split","_openAllCells","_looseGame","_openFreeCells","_isCellMarkedAsBomb","fakeBombCount","_winGame","_updateScoreElem","elem","tagName","_closeSettingsDialog","_openSettingsDialog","_startNewGame"],"mappings":"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AA+E,iBAAiB,EAAE;AAClG;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,gBAAgB;AAC3B,aAAY;AACZ;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,MAAK,SAAS;AACd,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,wEAAuE;AACvE,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,iBAAiB;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA,cAAa;AACb,aAAY;AACZ,aAAY;AACZ,eAAc;AACd;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACrPA,gB;;;;;;ACAA,0C;;;;;;;;;;;;;;ACCA;;;;AAEA;;;;;;K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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 317b3c5f6fae8b08bf0a\n **/","'use strict';\r\n\r\nimport Menu from './menu';\r\nimport Game from './game';\r\n\r\nlet menu = new Menu({\r\n  title: \"Меню\",\r\n  items: [{\r\n    title: \"Конфеты\",\r\n    href:  \"candy\"\r\n  }, {\r\n    title: \"Пирожки\",\r\n    href:  \"pie\"\r\n  }, {\r\n    title: \"Пряники\",\r\n    href:  \"cookies\"\r\n  }]\r\n});\r\n\r\ndocument.body.appendChild(menu.getElem());\r\n\r\nmenu.getElem().addEventListener('menu-select', function(event) {\r\n  alert(event.detail.value);\r\n});\r\n\r\nlet game = new Game({\r\n  title: \"Сапер\",\r\n  height: 15,\r\n  width: 15,\r\n  bombCount: 9\r\n});\r\n\r\ndocument.body.appendChild(game.getElem());\r\ngame.getElem().addEventListener('miner-cell', function(event) {\r\n  console.log(\"module\");\r\n  console.log(event.detail.value);\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./frontend/app.js\n **/","\nimport template from './menu.jade';\n\nimport './menu.styl';\n\nexport default class Menu {\n\n  constructor({title, items}) {\n    this._title = title;\n    this._items = items;\n\n    this._render();\n\n    this._titleElem = this._elem.querySelector('.title');\n\n    this._titleElem.onclick = () => {\n      this.toggle();\n    };\n\n    this._elem.onclick = event => {\n      let link = event.target.closest('a');\n      if (link && this._elem.contains(link)) {\n        event.preventDefault();\n        this._elem.dispatchEvent(new CustomEvent('menu-select', {\n          bubble: true,\n          detail: {\n            value: link.innerHTML\n          }\n        }));\n      }\n    };\n  }\n\n  _render() {\n    let tmp = document.createElement('div');\n    tmp.innerHTML = template({\n      title: this._title,\n      items: this._items\n    });\n    this._elem = tmp.firstElementChild;\n  }\n\n  toggle() {\n    this._elem.classList.toggle('open');\n  }\n\n  getElem() {\n    return this._elem;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./frontend/menu/index.js\n **/","var jade = require(\"d:\\\\Projects\\\\Miner\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (items, title, undefined) {\nbuf.push(\"<div class=\\\"menu\\\"><span class=\\\"title\\\">\" + (jade.escape(null == (jade_interp = title) ? \"\" : jade_interp)) + \"</span><ul>\");\n// iterate items\n;(function(){\n  var $$obj = items;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var item = $$obj[$index];\n\nbuf.push(\"<li><a\" + (jade.attr(\"href\", item.href, true, true)) + \">\" + (jade.escape(null == (jade_interp = item.title) ? \"\" : jade_interp)) + \"</a></li>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var item = $$obj[$index];\n\nbuf.push(\"<li><a\" + (jade.attr(\"href\", item.href, true, true)) + \">\" + (jade.escape(null == (jade_interp = item.title) ? \"\" : jade_interp)) + \"</a></li>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</ul></div>\");}.call(this,\"items\" in locals_for_with?locals_for_with.items:typeof items!==\"undefined\"?items:undefined,\"title\" in locals_for_with?locals_for_with.title:typeof title!==\"undefined\"?title:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/menu/menu.jade\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * Merge two attribute objects giving precedence\n * to values in object `b`. Classes are special-cased\n * allowing for arrays and merging/joining appropriately\n * resulting in a string.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api private\n */\n\nexports.merge = function merge(a, b) {\n  if (arguments.length === 1) {\n    var attrs = a[0];\n    for (var i = 1; i < a.length; i++) {\n      attrs = merge(attrs, a[i]);\n    }\n    return attrs;\n  }\n  var ac = a['class'];\n  var bc = b['class'];\n\n  if (ac || bc) {\n    ac = ac || [];\n    bc = bc || [];\n    if (!Array.isArray(ac)) ac = [ac];\n    if (!Array.isArray(bc)) bc = [bc];\n    a['class'] = ac.concat(bc).filter(nulls);\n  }\n\n  for (var key in b) {\n    if (key != 'class') {\n      a[key] = b[key];\n    }\n  }\n\n  return a;\n};\n\n/**\n * Filter null `val`s.\n *\n * @param {*} val\n * @return {Boolean}\n * @api private\n */\n\nfunction nulls(val) {\n  return val != null && val !== '';\n}\n\n/**\n * join array as classes.\n *\n * @param {*} val\n * @return {String}\n */\nexports.joinClasses = joinClasses;\nfunction joinClasses(val) {\n  return (Array.isArray(val) ? val.map(joinClasses) :\n    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :\n    [val]).filter(nulls).join(' ');\n}\n\n/**\n * Render the given classes.\n *\n * @param {Array} classes\n * @param {Array.<Boolean>} escaped\n * @return {String}\n */\nexports.cls = function cls(classes, escaped) {\n  var buf = [];\n  for (var i = 0; i < classes.length; i++) {\n    if (escaped && escaped[i]) {\n      buf.push(exports.escape(joinClasses([classes[i]])));\n    } else {\n      buf.push(joinClasses(classes[i]));\n    }\n  }\n  var text = joinClasses(buf);\n  if (text.length) {\n    return ' class=\"' + text + '\"';\n  } else {\n    return '';\n  }\n};\n\n\nexports.style = function (val) {\n  if (val && typeof val === 'object') {\n    return Object.keys(val).map(function (style) {\n      return style + ':' + val[style];\n    }).join(';');\n  } else {\n    return val;\n  }\n};\n/**\n * Render the given attribute.\n *\n * @param {String} key\n * @param {String} val\n * @param {Boolean} escaped\n * @param {Boolean} terse\n * @return {String}\n */\nexports.attr = function attr(key, val, escaped, terse) {\n  if (key === 'style') {\n    val = exports.style(val);\n  }\n  if ('boolean' == typeof val || null == val) {\n    if (val) {\n      return ' ' + (terse ? key : key + '=\"' + key + '\"');\n    } else {\n      return '';\n    }\n  } else if (0 == key.indexOf('data') && 'string' != typeof val) {\n    if (JSON.stringify(val).indexOf('&') !== -1) {\n      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +\n                   'will be escaped to `&amp;`');\n    };\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will eliminate the double quotes around dates in ' +\n                   'ISO form after 2.0.0');\n    }\n    return ' ' + key + \"='\" + JSON.stringify(val).replace(/'/g, '&apos;') + \"'\";\n  } else if (escaped) {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + exports.escape(val) + '\"';\n  } else {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + val + '\"';\n  }\n};\n\n/**\n * Render the given attributes object.\n *\n * @param {Object} obj\n * @param {Object} escaped\n * @return {String}\n */\nexports.attrs = function attrs(obj, terse){\n  var buf = [];\n\n  var keys = Object.keys(obj);\n\n  if (keys.length) {\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i]\n        , val = obj[key];\n\n      if ('class' == key) {\n        if (val = joinClasses(val)) {\n          buf.push(' ' + key + '=\"' + val + '\"');\n        }\n      } else {\n        buf.push(exports.attr(key, val, false, terse));\n      }\n    }\n  }\n\n  return buf.join('');\n};\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nvar jade_encode_html_rules = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\nvar jade_match_html = /[&<>\"]/g;\n\nfunction jade_encode_char(c) {\n  return jade_encode_html_rules[c] || c;\n}\n\nexports.escape = jade_escape;\nfunction jade_escape(html){\n  var result = String(html).replace(jade_match_html, jade_encode_char);\n  if (result === '' + html) return html;\n  else return result;\n};\n\n/**\n * Re-throw the given `err` in context to the\n * the jade in `filename` at the given `lineno`.\n *\n * @param {Error} err\n * @param {String} filename\n * @param {String} lineno\n * @api private\n */\n\nexports.rethrow = function rethrow(err, filename, lineno, str){\n  if (!(err instanceof Error)) throw err;\n  if ((typeof window != 'undefined' || !filename) && !str) {\n    err.message += ' on line ' + lineno;\n    throw err;\n  }\n  try {\n    str = str || require('fs').readFileSync(filename, 'utf8')\n  } catch (ex) {\n    rethrow(err, null, lineno)\n  }\n  var context = 3\n    , lines = str.split('\\n')\n    , start = Math.max(lineno - context, 0)\n    , end = Math.min(lines.length, lineno + context);\n\n  // Error context\n  var context = lines.slice(start, end).map(function(line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? '  > ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'Jade') + ':' + lineno\n    + '\\n' + context + '\\n\\n' + err.message;\n  throw err;\n};\n\nexports.DebugItem = function DebugItem(lineno, filename) {\n  this.lineno = lineno;\n  this.filename = filename;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jade/lib/runtime.js\n ** module id = 3\n ** module chunks = 0\n **/","/* (ignored) */\n\n\n/*****************\n ** WEBPACK FOOTER\n ** fs (ignored)\n ** module id = 4\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/menu/menu.styl\n ** module id = 5\n ** module chunks = 0\n **/","\nimport template from './game.jade';\n\nimport './game.styl';\n\nexport default class Game {\n\n  constructor({title, height, width, bombCount}) {\n    this._title = title;\n    this._status = \"0\"; // 0 = game in progress, 1 = win, -1 = loose\n    this._height = height;\n    this._width = width;\n\n    this._square = [];\n\n    this._bombCount = bombCount;\n    this._cellQueue = [];\n    \n    this.openedBombCount = 0;\n\n    this._render();\n    this._initSquare();\n    this._initBombs();\n\n    this._gameFieldElem.onclick = this.cellOnClick.bind(this);\n    this._gameFieldElem.addEventListener('contextmenu', this.bombOnRightClick.bind(this), false);\n    this._settingsDialog.onclick = this.settingsOnClick.bind(this);\n    this._menuElem.onclick = this.menuOnClick.bind(this);\n\n  }\n\n  _render() {\n    let tmp = document.createElement('div');\n    tmp.innerHTML = template({\n      title: this._title,\n      width: this._width,\n      height: this._height,\n      bombCount: this._bombCount\n    });\n    this._elem = tmp.firstElementChild;\n    this._gameFieldElem = this._elem.querySelector(\".miner-field\");\n    this._settingsDialog = this._elem.querySelector(\".miner-settings\");\n    this._menuElem = this._elem.querySelector(\".miner-menu\");\n  }\n\n\n  getElem() {\n    return this._elem;\n  }\n\n  /*******\n   * \n   *\n   */\n  static _getRandomInt_v1(min, max) {\n    return Math.floor(Math.random() * (max - min)) + min;\n  }\n\n  _getRandomInt(min, max) {\n    let rand = min + Math.random() * (max + 1 - min);\n    rand = Math.floor(rand);\n    return rand;\n  }\n\n  _isCellInQueue(queue, row, column) {\n    let result = false;\n    for(let i = 0; i < queue.length; i++) {\n      if (queue[i][0] == row && queue[i][1] == column) {\n        result = true;\n        break;\n      }\n    }\n    return result;\n  }\n  \n  _initSquare() {\n    //0 - empty cell; -1 - bomb; number - count of bombs around the cell\n    for(let i =0; i < this._height; i++) {\n      this._square[i] = [];\n      for(let j = 0; j < this._width; j++) {\n        this._square[i][j] = 0;\n      }\n    }\n  }\n\n  _initBombs(){\n    let mines = [];\n    let r, c;\n    for(let i = 0; i <  this._bombCount; i++) {\n      mines[i] = [];\n      do {\n        r = this._getRandomInt(0, this._height-1);\n        c = this._getRandomInt(0, this._width-1);\n      } while (this._square[r][c] < 0 );\n      mines[i][0] = r;\n      mines[i][1] = c;\n      this._square[r][c] = -1;\n      this._updateCountersAroundBomb(r,c);\n    }\n    this._mines = mines;\n  }\n\n  _isCellBomb( r, c ) {\n    return (this._square[r][c] < 0)?true : false;\n  }\n\n  _isCellNextToBomb( r, c ) {\n    return (this._square[r][c] > 0)?true : false;\n  }\n\n  _isCellVisited( r, c ) {\n    let cell = this._gameFieldElem.querySelector(\"#id\"+r+\"-\"+c+\"\");\n    if(cell.classList.contains('visited') || cell.classList.contains('nearby') || cell.classList.contains('mined') || cell.classList.contains('opened')|| cell.classList.contains('opened-bomb')) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  _isCellMarkedAsBomb( r, c ) {\n      let cell = this._gameFieldElem.querySelector(\"#id\"+r+\"-\"+c+\"\");\n      return (cell.classList.contains('opened-bomb'))? true : false;\n  }\n\n  _isGameCompleted() {\n    return (this._status == 0)?false:true;\n  }\n\n  _looseGame() {\n    this._status = -1;\n    let minerTitleElem = this._elem.querySelector(\".miner-title\");\n    minerTitleElem.innerHTML = \"You Loose!\";\n    minerTitleElem.classList.remove(\"alert-info\");\n    minerTitleElem.classList.add(\"alert-danger\");\n  }\n\n  _winGame() {\n    this._status = 1;\n    let minerTitleElem = this._elem.querySelector(\".miner-title\");\n    minerTitleElem.innerHTML = \"You Win!\";\n    minerTitleElem.classList.remove(\"alert-info\");\n    minerTitleElem.classList.add(\"alert-success\");\n  }\n\n  _updateCountersAroundBomb(r, c) {\n    for (let i = -1; i <= 1; i++){\n      for (let j = -1; j<=1; j++) {\n        let tr = r + i;\n        let tc = c + j;\n        if(tr >= 0 && tc >= 0 && tr < this._width && tc < this._height && !this._isCellBomb(tr,tc) ) {\n          this._square[tr][tc]++;\n        }\n\n      }\n    }\n  }\n\n  _openFreeCells(startRow, startColumn) {\n    //init\n    let cell;\n\n    let cellQueue = [];\n    let visitedQueue = [];\n\n    if(this._isCellVisited(startRow, startColumn) ) return ;\n\n    cellQueue[0] = [startRow, startColumn];\n\n    while ( cellQueue.length > 0 ) {\n      let cellCoords = cellQueue.shift();\n      visitedQueue[visitedQueue.length] = cellCoords;\n\n      cell = this._gameFieldElem.querySelector(\"#id\" + cellCoords[0] + \"-\" + cellCoords[1] + \"\");\n\n      if (this._square[cellCoords[0]][cellCoords[1]] > 0 ) {\n        this._openNextToBombCell(cell,this._square[cellCoords[0]][cellCoords[1]]);\n      } else {\n        cell.classList.add('opened');\n      }\n      if (this._isCellNextToBomb(cellCoords[0], cellCoords[1])) continue;\n\n      for (let i = -1; i <= 1; i++) {\n        for (let j = -1; j <= 1; j++) {\n          let tr = +cellCoords[0] + i;\n          let tc = +cellCoords[1] + j;\n\n          if (  tr >= 0 && tc >= 0 && tr < this._width && tc < this._height && !this._isCellBomb( tr, tc) && !this._isCellInQueue(cellQueue, tr, tc) && !this._isCellInQueue(visitedQueue, tr, tc)) {\n            if(this._isCellNextToBomb(tr, tc) ){\n              cell = this._gameFieldElem.querySelector(\"#id\" +tr +\"-\"+ tc + \"\");\n              this._openNextToBombCell(cell, this._square[tr][tc]);\n\n            } else {\n              if(i != j) {\n                cellQueue[cellQueue.length] = [tr, tc];\n              }\n              //cellQueue[cellQueue.length][0] = tr;\n              //cellQueue[cellQueue.length][1] = tc;\n            }\n          }\n        }\n      }\n\n\n\n      console.log(cellQueue.toString());\n    }\n  }\n  \n  _openAllCells () {\n    for(let i = 0; i < this._width; i++) {\n      for (let j = 0; j < this._height; j++) {\n        let cell = this._gameFieldElem.querySelector(\"#id\"+i+\"-\"+j+\"\");\n        if(!this._isCellVisited(i, j )) {\n          if (this._square[i][j] < 0) cell.classList.toggle('mined');\n          if (this._square[i][j] == 0)cell.classList.toggle('opened');\n          if (this._square[i][j] > 0) {\n            this._openNextToBombCell(cell, this._square[i][j]);\n          }\n        }\n      }\n    }\n  }\n\n  _openNextToBombCell(cell, aroundBombCount) {\n    let spanTag = document.createElement('span');\n    spanTag.innerHTML = aroundBombCount;\n\n    cell.classList.add('nearby');\n    cell.innerHTML = \"\";\n    cell.appendChild(spanTag);\n  }\n\n  _updateScoreElem() {\n    let minerCounterElem = this._elem.querySelector(\".miner-counter\");\n    minerCounterElem.innerHTML = this.openedBombCount+\"/\"+this._bombCount;\n  }\n\n  /****\n   *\n   *\n   */\n  _openSettingsDialog() {\n    this._settingsDialog.style.display = \"block\";\n  }\n\n  _closeSettingsDialog(){\n    this._settingsDialog.style.display = \"none\";\n  }\n\n\n  /****\n   *\n   *\n   */\n  _startNewGame() {\n    let height = this._settingsDialog.querySelector(\".miner-row-count\").lastChild.value;\n    let width = this._settingsDialog.querySelector(\".miner-column-count\").lastChild.value;\n    let bombCounter = this._settingsDialog.querySelector(\".miner-bomb-count\").lastChild.value;\n    if(width*height < bombCounter) {\n      this._showError(\"Error! Incorrect Settings!\");\n    } else {\n      if (this._elem)this._elem.innerHTML = \"\";\n      this.constructor({\"title\": \"\", \"height\": height, \"width\": width, \"bombCount\": bombCounter})\n      document.body.appendChild(this._elem);\n    }\n  }\n\n  _showError(message) {\n    let minerTitleElem = this._elem.querySelector(\".miner-title\");\n    minerTitleElem.innerHTML = message;\n    minerTitleElem.classList.remove(\"alert-info\");\n    minerTitleElem.classList.add(\"alert-danger\");\n  }\n\n  /****\n   *\n   *\n   */\n\n  cellOnClick(e) {\n\n    if(this._isGameCompleted()) return;\n\n    let cell = e.target.closest('div');\n    if (cell.id == undefined) return; \n    let id = (cell.id.replace(\"id\",\"\")).split(\"-\");\n    let row = id[0];\n    let column = id[1];\n    console.log(id);\n\n    if (this._isCellVisited(row, column)) return;\n\n    if(this._isCellBomb(row, column)) {\n      this._openAllCells();\n      this._looseGame();\n    } else {\n      this._openFreeCells(row, column);\n    }\n\n\n  }\n  \n  bombOnRightClick (e) {\n    e.preventDefault();\n    if(this._isGameCompleted()) return;\n\n    let cell = e.target.closest('div');\n    if (cell.id == undefined) return;\n    let id = (cell.id.replace(\"id\",\"\")).split(\"-\");\n    let row = id[0];\n    let column = id[1];\n    console.log(id);\n\n    if(!this._isCellVisited(row, column ) || this._isCellMarkedAsBomb(row, column) ) {\n      cell.classList.toggle('opened-bomb');\n      this.openedBombCount += (cell.classList.contains('opened-bomb'))?+1:-1;\n      if(this.openedBombCount == this._bombCount) {\n        let fakeBombCount = 0;\n        for (let i = 0; i < this._mines.length; i++) {\n          let cell = this._gameFieldElem.querySelector(\"#id\"+this._mines[i][0]+\"-\"+this._mines[i][1]+\"\");\n          if(!cell.classList.contains('opened-bomb'))fakeBombCount++;\n        }\n        if(fakeBombCount == 0) this._winGame();\n      }\n    }\n\n    this._updateScoreElem();\n  }\n\n  settingsOnClick(e) {\n    let elem = e.target;\n    if(elem.tagName != 'BUTTON') return;\n    this._closeSettingsDialog();\n  }\n\n  menuOnClick(e) {\n    let elem = e.target;\n    if(elem.tagName != 'BUTTON') return;\n    if(elem.classList.contains(\"miner-menu-settings\")){\n      this._openSettingsDialog();\n    }\n    if(elem.classList.contains(\"miner-menu-new-game\")){\n      this._startNewGame();\n    }\n  }\n\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./frontend/game/index.js\n **/","var jade = require(\"d:\\\\Projects\\\\Miner\\\\node_modules\\\\jade\\\\lib\\\\runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (bombCount, height, width) {\nbuf.push(\"<div class=\\\"miner-container\\\"><div class=\\\"miner-header\\\"><div class=\\\"miner-menu\\\"><button class=\\\"btn miner-menu-new-game\\\">New Game</button><button class=\\\"btn miner-menu-settings\\\">Settings</button></div><div class=\\\"miner-title alert alert-info\\\"><span>Your score:</span><div class=\\\"miner-counter\\\"></div></div></div><div class=\\\"miner-settings\\\"><div class=\\\"fade-in\\\"><div class=\\\"dialog\\\"><div class=\\\"dialog-content\\\"><div class=\\\"dialog-header\\\"><h2>Settings</h2></div><div class=\\\"dialog-body\\\"><div class=\\\"miner-row-count\\\"><span>Row count:</span><input type=\\\"number\\\"\" + (jade.attr(\"value\", height, true, true)) + \"></div><br><div class=\\\"miner-column-count\\\"><span>Column count:</span><input type=\\\"number\\\"\" + (jade.attr(\"value\", width, true, true)) + \"></div><br><div class=\\\"miner-bomb-count\\\"><span>Bomb count:</span><input type=\\\"number\\\"\" + (jade.attr(\"value\", bombCount, true, true)) + \"></div></div><div class=\\\"dialog-footer\\\"><button class=\\\"btn-dialog-close\\\">Close</button></div></div></div></div></div><div class=\\\"miner-field\\\">\");\nfor (let i = 0; i < height; i++){\n{\nbuf.push(\"<div class=\\\"miner-row\\\">\");\nfor (let j = 0; j < width; j++) {\n{\nbuf.push(\"<div\" + (jade.attr(\"id\", \"id\"+i+\"-\"+j, true, true)) + \" class=\\\"miner-cell\\\"></div>\");\n}\n}\nbuf.push(\"</div>\");\n}\n}\nbuf.push(\"</div></div>\");}.call(this,\"bombCount\" in locals_for_with?locals_for_with.bombCount:typeof bombCount!==\"undefined\"?bombCount:undefined,\"height\" in locals_for_with?locals_for_with.height:typeof height!==\"undefined\"?height:undefined,\"width\" in locals_for_with?locals_for_with.width:typeof width!==\"undefined\"?width:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/game/game.jade\n ** module id = 7\n ** module chunks = 0\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./frontend/game/game.styl\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}